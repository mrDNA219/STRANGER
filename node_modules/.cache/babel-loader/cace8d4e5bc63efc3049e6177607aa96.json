{"ast":null,"code":"import _regeneratorRuntime from\"/Users/francis/Desktop/Bootcamp/Stranger's Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/francis/Desktop/Bootcamp/Stranger's Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/francis/Desktop/Bootcamp/Stranger's Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState,useEffect}from\"react\";import reactDom from\"react-dom/client\";import{Route,Routes,BrowserRouter,useNavigate}from\"react-router-dom\";import'./style.css';import{Navbar,Profile,Posts,Home,Header,Register,Login,CreatePost,SinglePostView,EditPost}from'./components';import{getPosts,getUserDetails}from'./api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),token=_useState4[0],setToken=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var navigate=useNavigate();var retrievePosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getPosts(token);case 2:results=_context.sent;setPosts(results.data.posts);case 4:case\"end\":return _context.stop();}}},_callee);}));return function retrievePosts(){return _ref.apply(this,arguments);};}();function getMe(){return _getMe.apply(this,arguments);}function _getMe(){_getMe=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var storedToken,results;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:storedToken=window.localStorage.getItem('token');if(token){_context2.next=4;break;}if(storedToken){setToken(storedToken);}return _context2.abrupt(\"return\");case 4:_context2.next=6;return getUserDetails(token);case 6:results=_context2.sent;if(results.success){setUser(results.data);}else{console.log(results.error.message);}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _getMe.apply(this,arguments);}useEffect(function(){retrievePosts();},[token]);useEffect(function(){getMe();},[token]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Navbar,{setToken:setToken,token:token}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/posts\",element:/*#__PURE__*/_jsx(Posts,{posts:posts,token:token,retrievePosts:retrievePosts,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{path:\"/posts/createpost\",element:/*#__PURE__*/_jsx(CreatePost,{token:token,navigate:navigate,retrievePosts:retrievePosts})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{user:user,getMe:getMe})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{setToken:setToken,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setToken:setToken,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{path:\"/posts/:postID\",element:/*#__PURE__*/_jsx(SinglePostView,{posts:posts,retrievePosts:retrievePosts,token:token,navigate:navigate})}),/*#__PURE__*/_jsx(Route,{path:\"/posts/edit-post/:postID\",element:/*#__PURE__*/_jsx(EditPost,{posts:posts,token:token,navigate:navigate,retrievePosts:retrievePosts})})]})]});};var app=document.querySelector('#app');var root=reactDom.createRoot(app);root.render(/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(App,{})}));","map":{"version":3,"names":["React","useState","useEffect","reactDom","Route","Routes","BrowserRouter","useNavigate","Navbar","Profile","Posts","Home","Header","Register","Login","CreatePost","SinglePostView","EditPost","getPosts","getUserDetails","App","posts","setPosts","token","setToken","user","setUser","navigate","retrievePosts","results","data","getMe","storedToken","window","localStorage","getItem","success","console","log","error","message","app","document","querySelector","root","createRoot","render"],"sources":["/Users/francis/Desktop/Bootcamp/Stranger's Things/src/index.js"],"sourcesContent":["import {React, useState, useEffect} from \"react\";\nimport reactDom from \"react-dom/client\";\nimport { Route, Routes, BrowserRouter, useNavigate } from \"react-router-dom\";\nimport './style.css'\nimport {\n    Navbar,\n    Profile,\n    Posts,\n    Home,\n    Header,\n    Register,\n    Login,\n    CreatePost,\n    SinglePostView,\n    EditPost\n} from './components'\nimport{\n    getPosts, getUserDetails\n} from './api'\n\nconst App = () => {\n    const [posts, setPosts] = useState([])\n    const [token, setToken] = useState('')\n    const [user, setUser] = useState({})\n    const navigate = useNavigate()\n    const retrievePosts = async () => {\n        const results = await getPosts(token);\n        setPosts(results.data.posts)\n    }\n    async function getMe() {\n        const storedToken = window.localStorage.getItem('token');\n        if(!token){\n            if(storedToken){\n            setToken(storedToken);\n            }\n            return;\n        }\n        const results = await getUserDetails(token)\n        if(results.success){\n        setUser(results.data)\n        } else {\n            console.log(results.error.message)\n        }\n    }\n    useEffect(() => {\n        retrievePosts()\n    }, [token])\n    useEffect(() => {\n        getMe()\n    }, [token])\n        \n    return (\n        <div>\n            <Header />\n            <Navbar setToken={setToken} token={token}/> \n            <Routes>\n                <Route path='/' element={<Home />} />\n                <Route path='/posts' element={<Posts posts={posts} token={token} retrievePosts={retrievePosts} navigate={navigate}/>} />\n                <Route path='/posts/createpost' element={<CreatePost token={token} navigate={navigate} retrievePosts={retrievePosts}/>} />\n                <Route path='/profile' element={<Profile user={user} getMe={getMe}/>} />\n                <Route path='/register' element={<Register setToken={setToken} navigate={navigate} />} />\n                <Route path='/login' element={<Login setToken={setToken} navigate={navigate} />} />\n                <Route path='/posts/:postID' element={<SinglePostView posts={ posts } retrievePosts={retrievePosts} token={token} navigate={navigate} />} />\n                <Route path='/posts/edit-post/:postID' element={<EditPost posts={posts} token={token} navigate={navigate} retrievePosts={retrievePosts}/>} />\n            </Routes>\n            \n            \n        </div>\n        \n    )\n}\n const app = document.querySelector('#app')\n const root = reactDom.createRoot(app)\n root.render(\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n )"],"mappings":"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"},"metadata":{},"sourceType":"module"}