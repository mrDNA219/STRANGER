{"ast":null,"code":"import _regeneratorRuntime from\"/Users/francis/Desktop/Bootcamp/Stranger's Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/francis/Desktop/Bootcamp/Stranger's Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var baseURL='https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-PT';export var getPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(token){var response,results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(baseURL,\"/posts\"),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:results=_context.sent;return _context.abrupt(\"return\",results);case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getPosts(_x){return _ref.apply(this,arguments);};}();export var registerUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(username,password){var response,results;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(baseURL,\"/users/register\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:username,password:password}})});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:results=_context2.sent;return _context2.abrupt(\"return\",results);case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function registerUser(_x2,_x3){return _ref2.apply(this,arguments);};}();export var loginUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(username,password){var response,results;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"\".concat(baseURL,\"/users/login\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:username,password:password}})});case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:results=_context3.sent;return _context3.abrupt(\"return\",results);case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function loginUser(_x4,_x5){return _ref3.apply(this,arguments);};}();export var getUserDetails=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(token){var response,results;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(\"\".concat(baseURL,\"/users/me\"),{headers:{'Content-Type':'application/json','Authorization':\"bearer \".concat(token)}});case 3:response=_context4.sent;_context4.next=6;return response.json();case 6:results=_context4.sent;return _context4.abrupt(\"return\",results);case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);console.error(_context4.t0);case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[0,10]]);}));return function getUserDetails(_x6){return _ref4.apply(this,arguments);};}();export var createPost=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(token,_ref5){var title,description,price,location,willDeliver,response,results;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:title=_ref5.title,description=_ref5.description,price=_ref5.price,location=_ref5.location,willDeliver=_ref5.willDeliver;_context5.prev=1;_context5.next=4;return fetch(\"\".concat(baseURL,\"/posts\"),{method:\"POST\",headers:{'Content-Type':'application/json','Authorization':\"bearer \".concat(token)},body:JSON.stringify({post:{title:title,description:description,price:price,location:location,willDeliver:willDeliver}})});case 4:response=_context5.sent;_context5.next=7;return response.json();case 7:results=_context5.sent;return _context5.abrupt(\"return\",results);case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](1);console.error('error creating new post');case 14:case\"end\":return _context5.stop();}}},_callee5,null,[[1,11]]);}));return function createPost(_x7,_x8){return _ref6.apply(this,arguments);};}();export var updatePost=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(_ref7){var token,title,description,price,location,willDeliver,_id,response,results;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:token=_ref7.token,title=_ref7.title,description=_ref7.description,price=_ref7.price,location=_ref7.location,willDeliver=_ref7.willDeliver,_id=_ref7._id;_context6.prev=1;_context6.next=4;return fetch(\"\".concat(baseURL,\"/posts/\").concat([_id]),{method:\"PATCH\",headers:{'Content-Type':'application/json','Authorization':\"bearer \".concat(token)},body:JSON.stringify({post:{title:title,description:description,price:price,location:location,willDeliver:willDeliver}})});case 4:response=_context6.sent;_context6.next=7;return response.json();case 7:results=_context6.sent;return _context6.abrupt(\"return\",results);case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](1);console.log('error updating the post');case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[1,11]]);}));return function updatePost(_x9){return _ref8.apply(this,arguments);};}();export var createMessage=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(_ref9){var postID,token,message,response;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:postID=_ref9.postID,token=_ref9.token,message=_ref9.message;_context7.prev=1;_context7.next=4;return fetch(\"\".concat(baseURL,\"/posts/\").concat(postID,\"/messages\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({message:message})});case 4:response=_context7.sent;_context7.next=10;break;case 7:_context7.prev=7;_context7.t0=_context7[\"catch\"](1);console.log('error creating message');case 10:case\"end\":return _context7.stop();}}},_callee7,null,[[1,7]]);}));return function createMessage(_x10){return _ref10.apply(this,arguments);};}();export var deletePosts=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(token,postID){var response,result;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return fetch(\"\".concat(baseURL,\"/posts/\").concat(postID),{method:\"DELETE\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context8.sent;_context8.next=6;return response.json();case 6:result=_context8.sent;console.log(result);_context8.next=13;break;case 10:_context8.prev=10;_context8.t0=_context8[\"catch\"](0);console.log('error deleting post');case 13:case\"end\":return _context8.stop();}}},_callee8,null,[[0,10]]);}));return function deletePosts(_x11,_x12){return _ref11.apply(this,arguments);};}();","map":{"version":3,"names":["baseURL","getPosts","token","fetch","headers","response","json","results","console","error","registerUser","username","password","method","body","JSON","stringify","user","loginUser","getUserDetails","createPost","title","description","price","location","willDeliver","post","updatePost","_id","log","createMessage","postID","message","deletePosts","result"],"sources":["/Users/francis/Desktop/Bootcamp/Stranger's Things/src/api/index.js"],"sourcesContent":["\nconst baseURL = 'https://strangers-things.herokuapp.com/api/2206-FTB-ET-WEB-PT'\n\nexport const getPosts = async (token) => {\n    try{\n        const response = await fetch(`${baseURL}/posts`, {\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          }\n        }) ;\n        const results =  await response.json();\n        return(results)\n    } catch(er){\n        console.error(er)\n    }\n}\n\nexport const registerUser = async (username, password) => {\n    try{\n        const response = await fetch(`${baseURL}/users/register`, {\n            method: \"POST\",\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              user: {\n                username: username,\n                password: password\n              }\n            })\n          });\n        const results = await response.json();\n        return(results)\n    } catch(er){\n        console.error(er)\n    }\n}\nexport const loginUser = async (username, password) => {\n  try{\n    const response = await fetch(`${baseURL}/users/login`,{\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user: {\n          username: username,\n          password: password\n        }\n      })\n    });\n    const results = await response.json();\n    return results;\n  } catch(er) {\n    console.error(er)\n  }\n}\nexport const getUserDetails = async (token) => {\n  try{\n    const response = await fetch(`${baseURL}/users/me`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `bearer ${token}`\n      }\n    })\n    const results = await response.json()\n    return results\n  } catch(er) {\n    console.error(er)\n  }\n}\nexport const createPost = async (token, {title, description, price, location, willDeliver}) => {\n  try{\n    const response = await fetch(`${baseURL}/posts`,  {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `bearer ${token}`\n      }, \n      body: JSON.stringify({\n        post: {\n          title,\n          description,\n          price,\n          location,\n          willDeliver\n        }\n      })\n    })\n    const results = await response.json()\n    return results\n  } catch(er) {\n    console.error('error creating new post')\n  }\n}\nexport const updatePost = async ({token, title, description, price, location, willDeliver, _id}) => {\n  try{\n    const response = await fetch(`${baseURL}/posts/${[_id]}`,  {\n      method: \"PATCH\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `bearer ${token}`\n      }, \n      body: JSON.stringify({\n        post: {\n          title,\n          description,\n          price,\n          location,\n          willDeliver\n        }\n      })\n    })\n    const results = await response.json()\n    return results\n  } catch(er) {\n    console.log('error updating the post')\n  }\n}\nexport const createMessage = async ({postID, token, message}) => {\n  try {\n    const response = await fetch(`${baseURL}/posts/${postID}/messages`, {\n     method: 'POST',\n     headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n     },\n     body: JSON.stringify({\n      message\n     })\n    })\n  } catch(ex) {\n    console.log('error creating message')\n  }\n}\nexport const deletePosts = async (token, postID) => {\n  try{\n    const response = await fetch(`${baseURL}/posts/${postID}`, {\n      method: \"DELETE\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    })\n    const result = await response.json();\n    console.log(result)\n    \n  } catch(er){\n    console.log('error deleting post')\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}