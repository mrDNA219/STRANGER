{"ast":null,"code":"import _regeneratorRuntime from\"/Users/francis/Desktop/Bootcamp/Stranger's Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/francis/Desktop/Bootcamp/Stranger's Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/francis/Desktop/Bootcamp/Stranger's Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import{createMessage}from'../api';import\"../style.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SendMessage=function SendMessage(_ref){var postID=_ref.postID,token=_ref.token,navigate=_ref.navigate;var _useState=useState({content:''}),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];function addMessage(){return _addMessage.apply(this,arguments);}function _addMessage(){_addMessage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return createMessage({postID:postID,message:message,token:token});case 2:case\"end\":return _context.stop();}}},_callee);}));return _addMessage.apply(this,arguments);}if(token){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(ev){ev.preventDefault();addMessage();navigate('./profile');},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Message\",className:\"inputs\",onChange:function onChange(ev){return setMessage({content:ev.target.value});}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send Message\"})]});}};var SinglePostView=function SinglePostView(_ref2){var posts=_ref2.posts,retrievePosts=_ref2.retrievePosts,token=_ref2.token,navigate=_ref2.navigate;useEffect(function(){retrievePosts();},[]);var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),activateMessage=_useState4[0],setActivateMessage=_useState4[1];var _useParams=useParams(),postID=_useParams.postID;if(posts.length){var _posts$filter=posts.filter(function(post){return post._id===postID;}),_posts$filter2=_slicedToArray(_posts$filter,1),currentPost=_posts$filter2[0];var title=currentPost.title,description=currentPost.description,location=currentPost.location,price=currentPost.price,willDeliver=currentPost.willDeliver,isAuthor=currentPost.isAuthor;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"posts\",children:[/*#__PURE__*/_jsx(\"h3\",{children:title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",description]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: \",price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Location: \",location]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Will Deliver: \",willDeliver.toString()]})]}),!isAuthor?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setActivateMessage(!activateMessage);},children:\"Message this user\"}):null,activateMessage&&/*#__PURE__*/_jsx(SendMessage,{postID:postID,token:token,navigate:navigate})]});}else{return/*#__PURE__*/_jsx(\"h1\",{children:\"waiting for posts\"});}};export default SinglePostView;","map":{"version":3,"names":["React","useEffect","useState","useParams","createMessage","SendMessage","postID","token","navigate","content","message","setMessage","addMessage","ev","preventDefault","target","value","SinglePostView","posts","retrievePosts","activateMessage","setActivateMessage","length","filter","post","_id","currentPost","title","description","location","price","willDeliver","isAuthor","toString"],"sources":["/Users/francis/Desktop/Bootcamp/Stranger's Things/src/components/SinglePostView.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { useParams } from 'react-router-dom';\nimport { createMessage } from '../api';\nimport \"../style.css\"\nconst SendMessage = ({ postID, token, navigate }) => {\n  const [message, setMessage] = useState({content: ''});\n  async function addMessage() {\n    await createMessage({postID, message, token})\n  }\n  if(token){\n    return (\n      <form onSubmit={ (ev)=> {\n        ev.preventDefault();\n        addMessage();\n        navigate('./profile')\n\n      }}>\n        <input\n          type='text'\n          placeholder='Enter Message'\n          className=\"inputs\"\n          onChange={ (ev) => setMessage({content: ev.target.value}) }\n        />\n        <button type='submit'>Send Message</button>\n      </form>\n    )\n  } \n}\nconst SinglePostView = ({ posts, retrievePosts, token, navigate}) => {\n  useEffect(() =>{\n    retrievePosts();\n  }, [])\n  const [activateMessage, setActivateMessage] = useState(false)\n  const { postID } = useParams();\n \n  \n  if(posts.length){\n    const [currentPost] = posts.filter(post => post._id === postID);\n    const {title, description, location, price, willDeliver, isAuthor} = currentPost;\n    return (\n      <div>\n        <div className='posts'>\n        <h3>{title}</h3>\n        <p>Description: {description}</p>\n        <p>Price: {price}</p>\n        <p>Location: {location}</p>\n        <p>Will Deliver: {willDeliver.toString()}</p>\n        </div>\n        {!isAuthor ? (\n      <button onClick={() => setActivateMessage(!activateMessage)}>Message this user</button>\n        ) : (null)\n        }\n      {\n        activateMessage && <SendMessage postID={postID} token={token} navigate={navigate}/>\n      }\n      </div>\n    )\n  } else {\n    return (\n      <h1>waiting for posts</h1>\n    )\n  }\n  \n  \n  \n  \n \n}\n\nexport default SinglePostView;"],"mappings":"qaAAA,MAAOA,MAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,aAAT,KAA8B,QAA9B,CACA,MAAO,cAAP,C,wFACA,GAAMC,YAAW,CAAG,QAAdA,YAAc,MAAiC,IAA9BC,OAA8B,MAA9BA,MAA8B,CAAtBC,KAAsB,MAAtBA,KAAsB,CAAfC,QAAe,MAAfA,QAAe,CACnD,cAA8BN,QAAQ,CAAC,CAACO,OAAO,CAAE,EAAV,CAAD,CAAtC,wCAAOC,OAAP,eAAgBC,UAAhB,eADmD,QAEpCC,WAFoC,0IAEnD,2JACQR,cAAa,CAAC,CAACE,MAAM,CAANA,MAAD,CAASI,OAAO,CAAPA,OAAT,CAAkBH,KAAK,CAALA,KAAlB,CAAD,CADrB,uDAFmD,6CAKnD,GAAGA,KAAH,CAAS,CACP,mBACE,cAAM,QAAQ,CAAG,kBAACM,EAAD,CAAO,CACtBA,EAAE,CAACC,cAAH,GACAF,UAAU,GACVJ,QAAQ,CAAC,WAAD,CAAR,CAED,CALD,wBAME,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,eAFd,CAGE,SAAS,CAAC,QAHZ,CAIE,QAAQ,CAAG,kBAACK,EAAD,QAAQF,WAAU,CAAC,CAACF,OAAO,CAAEI,EAAE,CAACE,MAAH,CAAUC,KAApB,CAAD,CAAlB,EAJb,EANF,cAYE,eAAQ,IAAI,CAAC,QAAb,0BAZF,GADF,CAgBD,CACF,CAvBD,CAwBA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,OAA8C,IAA3CC,MAA2C,OAA3CA,KAA2C,CAApCC,aAAoC,OAApCA,aAAoC,CAArBZ,KAAqB,OAArBA,KAAqB,CAAdC,QAAc,OAAdA,QAAc,CACnEP,SAAS,CAAC,UAAK,CACbkB,aAAa,GACd,CAFQ,CAEN,EAFM,CAAT,CAGA,eAA8CjB,QAAQ,CAAC,KAAD,CAAtD,yCAAOkB,eAAP,eAAwBC,kBAAxB,eACA,eAAmBlB,SAAS,EAA5B,CAAQG,MAAR,YAAQA,MAAR,CAGA,GAAGY,KAAK,CAACI,MAAT,CAAgB,CACd,kBAAsBJ,KAAK,CAACK,MAAN,CAAa,SAAAC,IAAI,QAAIA,KAAI,CAACC,GAAL,GAAanB,MAAjB,EAAjB,CAAtB,gDAAOoB,WAAP,mBACA,GAAOC,MAAP,CAAqED,WAArE,CAAOC,KAAP,CAAcC,WAAd,CAAqEF,WAArE,CAAcE,WAAd,CAA2BC,QAA3B,CAAqEH,WAArE,CAA2BG,QAA3B,CAAqCC,KAArC,CAAqEJ,WAArE,CAAqCI,KAArC,CAA4CC,WAA5C,CAAqEL,WAArE,CAA4CK,WAA5C,CAAyDC,QAAzD,CAAqEN,WAArE,CAAyDM,QAAzD,CACA,mBACE,oCACE,aAAK,SAAS,CAAC,OAAf,wBACA,oBAAKL,KAAL,EADA,cAEA,qCAAiBC,WAAjB,GAFA,cAGA,+BAAWE,KAAX,GAHA,cAIA,kCAAcD,QAAd,GAJA,cAKA,sCAAkBE,WAAW,CAACE,QAAZ,EAAlB,GALA,GADF,CAQG,CAACD,QAAD,cACH,eAAQ,OAAO,CAAE,yBAAMX,mBAAkB,CAAC,CAACD,eAAF,CAAxB,EAAjB,+BADG,CAEI,IAVP,CAaEA,eAAe,eAAI,KAAC,WAAD,EAAa,MAAM,CAAEd,MAArB,CAA6B,KAAK,CAAEC,KAApC,CAA2C,QAAQ,CAAEC,QAArD,EAbrB,GADF,CAkBD,CArBD,IAqBO,CACL,mBACE,yCADF,CAGD,CAMF,CAvCD,CAyCA,cAAeS,eAAf"},"metadata":{},"sourceType":"module"}